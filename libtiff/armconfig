#!/bin/bash
# unpack & configure readline-4.3 build for arm-linux -- 3/14/10 brent@mbari.org
: ${CFLAGS:=-Os -fomit-frame-pointer}
: ${CXXFLAGS:=$CFLAGS}
: ${ARMGCC:=/arm}
: ${CC:=$ARMGCC/bin/gcc}
: ${LIBTOP:=${1-$ARMGCC/usr}}
: ${TIFFVERS:=tiff-v3.4}
export CC CFLAGS CXXFLAGS
top=$PWD
rm -rf $TIFFVERS &&
tar zxf ${TIFFVERS}-tar.gz 2>/dev/null &&
cp -f armport.h $TIFFVERS/libtiff/port.h &&
cd $TIFFVERS &&
patch -p1 <$top/tiff-v3.4.patch &&
ARMTOP=$ARMGCC GCOPTS=$CFLAGS configure --target=arm-unknown-linux --noninteractive && 
echo "Now, run arminstall"
